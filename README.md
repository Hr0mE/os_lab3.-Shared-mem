# Лабораторная работа №3 — Менеджер процессов с shared memory

Проект реализует модуль управления процессами с использованием **shared memory**, таймеров и логирования. Поддерживается кроссплатформенная сборка и запуск на **Linux** и **Windows**.

---

## Структура проекта

```
.
├── build/                  # Каталог сборки
│   ├── bin/                # Исполняемые файлы и логи
│   │   ├── logs/           # Логи приложения
│   │   └── os_lab3/        # Логи копий процессов
│   ├── CMakeFiles/         # Внутренние файлы CMake
│   └── logs/               # Общие логи сборки
├── include/                # Заголовочные файлы
│   ├── api/                # API модуля
│   └── internal/           # Внутренние платформозависимые утилиты
├── logs/                   # Каталог логов для ручного использования
├── scripts/                # Скрипты сборки и запуска (Linux/Windows)
└── src/                    # Исходники

```

---

## Особенности реализации

- **Кроссплатформенность**: код работает на Linux и Windows.
- **Shared memory**: процессы обмениваются данными через разделяемую память.
- **Мьютексы и синхронизация**: используется кроссплатформенный API для мьютексов.
- **Таймеры**: реализованы 3 таймера:
  - 300 мс — инкремент счётчика;
  - 1 сек — логирование состояния счётчика мастером;
  - 3 сек — проверка статуса дочерних процессов и запуск копий.
- **Логирование**: все процессы пишут логи в `logs/process.log`.
- **Интерактивный ввод**:
  - `set <value>` — установить значение счётчика;
  - `get` — прочитать текущее значение;
  - `quit`/`exit`/`q` — завершение процесса.

---

## Сборка проекта

### Linux / WSL

```bash
cd scripts
./build_linux.sh
````

### Windows (PowerShell)

```powershell
cd scripts
.\build_windows.ps1
```

* Скрипт создаёт рабочий каталог `build/`, выполняет CMake-конфигурацию и сборку.
* После сборки можно запускать исполняемый файл:

```bash
cd build/bin
./os_lab3_main        # Linux
.\os_lab3_main.exe    # Windows
```

---

## Запуск нескольких экземпляров

Проект поддерживает запуск параллельных копий:

```bash
./os_lab3_main &   # Linux
Start-Process .\os_lab3_main.exe  # Windows PowerShell
```

* Мастер-процесс управляет состоянием счётчика и запуском дочерних процессов.
* Дочерние процессы (Copy1/Copy2) выполняют свои задачи и завершаются.

---

## Логи

* Основной лог: `build/bin/logs/process.log`
* Логи копий (если создаются) хранятся в `build/bin/os_lab3/logs/`
* Логи содержат метку времени, PID процесса и выполняемую операцию.

---

## Контакты

* Автор: Ляпин Дмитрий, студент Б9122-01.03.02мкт
* Дата: Январь 2026
* Проект подготовлен в рамках учебной лабораторной работы.
